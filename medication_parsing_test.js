const PATIENT_WITH_MCG_AND_DECIMAL = `Request issued 230713 by Prac: 91/13865 (Marazzi)    Logon ID: TEST_1234
0 Operation successful
 

Med reconciliation
1234 123 123 - JOHN E DOE - 1992 Jan 01 - Male
Please check the medications you want included on the report,
then click the Continue Button.
Drugs are listed in alphabetic order

NOTE: By default only current medications are automatically selected

 Check here to include all prescriptions on the report

      Continue
01938088


	ACETAMINOPHEN    325 MG TABLET
Jamp Acetaminophen 325   JAMP PHARMA CO
Dispensed: 2023 Jul 12 Status:Filled
Qty: 6.0 Duration: 1
*DAILY DISPENSE* TAKE 2 TABLETS ORALLY THREE TIMES DAILY
02487381


	APIXABAN    2.5 MG TABLET
Apo-Apixaban   APOTEX INC
Dispensed: 2023 Jul 12 Status:Filled
Qty: 2.0 Duration: 1
*DAILY DISPENSE* TAKE 1 TABLET ORALLY TWICE DAILY
02487403
		APIXABAN    5 MG TABLET
Apo-Apixaban   APOTEX INC
Dispensed: 2023 Apr 25 Status:Filled
Qty: 2.0 Duration: 1
*DAILY DISPENSE* TAKE 1 TABLET ORALLY TWICE DAILY
02489236
		APIXABAN    5 MG TABLET
Sandoz Apixaban Sdz   SANDOZ CANADA
Dispensed: 2023 Feb 24 Status:Filled
Qty: 60.0 Duration: 30
TAKE 1 TABLET TWICE DAILY (AT 8AM AND 8PM)
02245916
		CARVEDILOL    12.5 MG TABLET
Pms-Carvedilol   PHARMASCIENCE
Dispensed: 2023 Jan 27 Status:Filled
Qty: 90.0 Duration: 90
TAKE 1/2 TABLET TWICE A DAY
02245916
		CARVEDILOL    12.5 MG TABLET
Pms-Carvedilol   PHARMASCIENCE
Dispensed: 2023 Feb 24 Status:Filled
Qty: 30.0 Duration: 30
TAKE 1/2 TABLET TWICE A DAY WITH FOOD
66123252
		COMPOUNDED PREP (PHARMACARE NO   
Compounded Prep (Pharmacare Non-Benefit)   UNKNOWN
Dispensed: 2023 May 15 Status:Filled
Qty: 400.0 Duration: 14
(ACETAMINOPHEN 100MG/ML ) (SHAKE WELL ) THEN GIVE 6.5 MILLILITERS (=650MG) FOU
02531410


	DAPAGLIFLOZIN    10 MG TABLET
AURO PHARMA IN
Dispensed: 2023 Jul 12 Status:Filled
Qty: 1.0 Duration: 1
* DAILY DISPENSE* TAKE ONE TABLET ORALLY ONCE DAILY ( NEW MED)
02335700
		DIGOXIN    0.0625 MG TABLET
Pms-Digoxin   PHARMASCIENCE
Dispensed: 2023 Feb 24 Status:Filled
Qty: 30.0 Duration: 30
TAKE 1 TABLET ONCE A DAY
02335719


	DIGOXIN    0.125 MG TABLET
Pms-Digoxin   PHARMASCIENCE
Dispensed: 2023 Jul 11 Status:Filled
Qty: 1.0 Duration: 1
*DAILY DISPENSE* TAKE 1 TABLET ORALLY ONCE DAILY
02466759
		FUROSEMIDE    20 MG TABLET
Mint-Furosemide   MINT PHARMACEU
Dispensed: 2023 Apr 25 Status:Filled
Qty: 3.0 Duration: 1
*DAILY DISPENSE* TAKE 3 TABLETS ORALLY ONCE DAILY
02466759


	FUROSEMIDE    20 MG TABLET
Mint-Furosemide   MINT PHARMACEU
Dispensed: 2023 Jul 12 Status:Filled
Qty: 3.0 Duration: 1
*DAILY DISPENSE* TAKE 3 TABLETS ORALLY ONCE DAILY (HOLD IF SBP LESS THAN 90 AND
02466759
		FUROSEMIDE    20 MG TABLET
Mint-Furosemide   MINT PHARMACEU
Dispensed: 2023 Feb 24 Status:Filled
Qty: 60.0 Duration: 30
TAKE 1 TABLET TWICE DAILY
02466767
		FUROSEMIDE    40 MG TABLET
Mint-Furosemide   MINT PHARMACEU
Dispensed: 2023 Jan 26 Status:Filled
Qty: 90.0 Duration: 90
TAKE 1 TABLET ONCE A DAY ( FOR FLUID RETENTION )
00885444
		HYDROMORPHONE HCL    1 MG TABLET
Pms-Hydromorphone Tab 1mg   PHARMASCIENCE
Dispensed: 2023 May 20 Status:Filled
Qty: 1.0 Duration: 1
(MAY 16 - JUNE 07 )DAILY DISPENSE* TAKE 1/2 TABLET ORALLY FOUR TIMES DAILY AS NE
00885444
		HYDROMORPHONE HCL    1 MG TABLET
Pms-Hydromorphone Tab 1mg   PHARMASCIENCE
Dispensed: 2023 May 18 Status:Filled
Qty: 0.5 Duration: 1
(MAY 16 - JUNE 24)DAILY DISPENSE* TAKE 1/2 TABLET ORALLY FOUR TIMES DAILY AS NEE
00885444
		HYDROMORPHONE HCL    1 MG TABLET
Pms-Hydromorphone Tab 1mg   PHARMASCIENCE
Dispensed: 2023 May 04 Status:Filled
Qty: 2.0 Duration: 1
*DAILY DISPENSE* TAKE 1/2 TABLET ORALLY FOUR TIMES DAILY AS NEEDED (4 DOSES IN S
00885444
		HYDROMORPHONE HCL    1 MG TABLET
Pms-Hydromorphone Tab 1mg   PHARMASCIENCE
Dispensed: 2023 Apr 26 Status:Filled
Qty: 1.5 Duration: 1
*DAILY DISPENSE* TAKE 1/2 TABLET ORALLY FOUR TIMES DAILY AS NEEDED (PT ONLY WANT
02172062


	LEVOTHYROXINE SODIUM    25 MCG TABLET
Synthroid   BGP PHARMA ULC
Dispensed: 2023 Jul 12 Status:Filled
Qty: 1.0 Duration: 1
*DAILY DISPENSE* TAKE 1 TABLET ORALLY ONCE DAILY {LEVOTHYROXINE}
99000501
		MEDICATION REVIEW STANDARD    
Medication Review Standard   UNKNOWN
Dispensed: 2023 May 12 Status:Filled
Qty: 1.0 Duration: 1
604-574-3331 MEDICATION REVIEW PHARMACITY DRUGSTORE #3 **(MR-S)**
02248855


	METOPROLOL TARTRATE    25 MG TABLET
Pms-Metoprolol-L   PHARMASCIENCE
Dispensed: 2023 Jul 11 Status:Filled
Qty: 1.0 Duration: 1
*DAILY DISPENSE* TAKE 1/2 TABLET ORALLY TWICE DAILY
02384892
		NABILONE    1 MG CAPSULE
Teva-Nabilone   TEVA CANADA LI
Dispensed: 2023 Jun 17 Status:Filled
Qty: 30.0 Duration: 5
TAKE 1 OR 2 CAPSULES 3 TIMES A DAY
02384892
		NABILONE    1 MG CAPSULE
Teva-Nabilone   TEVA CANADA LI
Dispensed: 2023 May 19 Status:Filled
Qty: 30.0 Duration: 5
TAKE 1 OR 2 CAPSULES 3 TIMES A DAY AS NEEDED
02408570
		PANTOPRAZOLE MAGNESIUM    40 MG TABLET DR
Mylan-Pantoprazole T   MYLAN PHARMACE
Dispensed: 2023 May 19 Status:Filled
Qty: 30.0 Duration: 30
TAKE 1 TABLET ONCE A DAY
02316080


	QUETIAPINE FUMARATE    25 MG TABLET
Act Quetiapine   TEVA CANADA LI
Dispensed: 2023 Jul 12 Status:Filled
Qty: 0.5 Duration: 1
*DAILY DISPENSE* TAKE 1/2 TABLET ORALLY AT BEDTIME
02446936


	SACUBITRIL/VALSARTAN    49 MG-51MG TABLET
Entresto   NOVARTIS PHARM
Dispensed: 2023 Jul 12 Status:Filled
Qty: 2.0 Duration: 1
*DAILY DISPENSE* TAKE 1 TABLET ORALLY TWICE DAILY (SACUBATRIL/VALSARTAN)
02446944
		SACUBITRIL/VALSARTAN    97MG-103MG TABLET
Entresto   NOVARTIS PHARM
Dispensed: 2023 Jan 30 Status:Filled
Qty: 100.0 Duration: 50
TAKE 1 TABLET TWICE DAILY
02446944
		SACUBITRIL/VALSARTAN    97MG-103MG TABLET
Entresto   NOVARTIS PHARM
Dispensed: 2023 Feb 24 Status:Filled
Qty: 60.0 Duration: 30
TAKE 1 TABLET TWICE DAILY (START IF SYSTOLIC BLOOD PRESSURE IS GREATER THAN 100)
      Continue

 `

 const PATIENT_WITH_DECIMAL_AND_TEMP_DRUG = `Request issued 230713 by Prac: 91/13865 (TESTER)    Logon ID: TEST1234
0 Operation successful
 

Med reconciliation
1234 123 123 - MARY U DOE - 1955 Jan 02 - Female
Please check the medications you want included on the report,
then click the Continue Button.
Drugs are listed in alphabetic order

NOTE: By default only current medications are automatically selected

 Check here to include all prescriptions on the report

      Continue
02489236


	APIXABAN    5 MG TABLET
Sandoz Apixaban Sdz   SANDOZ CANADA
Dispensed: 2023 Jul 08 Status:Filled
Qty: 56.0 Duration: 28
TAKE 1 TABLET TWICE A DAY
02272873


	CARBIDOPA/LEVODOPA    25MG-100MG TABLET ER
Aa-Levocarb Cr   AA PHARMA INC.
Dispensed: 2023 Jul 08 Status:Filled
Qty: 140.0 Duration: 28
TAKE 1 TABLET ORALLY FOUR TIMES A DAY
02521261
		CEPHALEXIN    500 MG TABLET
Cephalexin   SANIS HEALTH
Dispensed: 2023 Apr 28 Status:Filled
Qty: 28.0 Duration: 7
TAKE 1 TABLET EVERY 6 HOURS FOR 7 DAYS
02335719


	DIGOXIN    0.125 MG TABLET
Pms-Digoxin   PHARMASCIENCE
Dispensed: 2023 Jul 08 Status:Filled
Qty: 28.0 Duration: 28
TAKE 1 TABLET ONCE DAILY
02516136


	DILTIAZEM HCL    240 MG CAP SA 24H
Diltiazem T   SANIS HEALTH
Dispensed: 2023 Jul 08 Status:Filled
Qty: 28.0 Duration: 28
TAKE 1 CAPSULE ORALLY ONCE DAILY
02351420


	FUROSEMIDE    20 MG TABLET
Furosemide   SANIS HEALTH
Dispensed: 2023 Jul 09 Status:Filled
Qty: 28.0 Duration: 28
TAKE 1 TABLET ONCE DAILY
      Continue

 `

function extractDoseFromNameTest(){
    const TEST_NAME = 'extractDoseFromNameTest';

    const MEDICATION_DOSAGE_REGEX = /\d+(\.\d+)?\s*(MCG|MG)|\d+\s*(MCG|MG)/
    function extractDoseFromName(name){
        const match = name.match(MEDICATION_DOSAGE_REGEX);
        if (match && match.length > 0) {
            return match[0].replace(/\s/g, "");
        }
        return null;
    }

    let testCases = [
        { name: 'DIGOXIN    0.125 MG TABLET', expected: '0.125MG' },
        { name: '	LEVOTHYROXINE SODIUM    25 MCG TABLET', expected: '25MCG' },
        { name: 'DILTIAZEM HCL    240 MG CAP SA 24H', expected: '240MG' },
        { name: 'BOBOB  29.8 MCG', expected: '29.8MCG' },
        { name: 'BOBOB  29.8 MCG MG', expected: '29.8MCG' },
        { name: 'JFKDSJFK 2222222.0 MG', expected: '2222222.0MG' },
        { name: '10 MG fjdkls fjkdlsajfkls', expected: '10MG' },
        { name: 'jkfdlsa fdkjlaf dsl 10.8 MCG', expected: '10.8MCG' },
        { name: 'fdsjaklfds 22.9 MG 32890jfksfds kfsj ', expected: '22.9MG' },
        { name: '23490 9230439 27.8 MG 89089kflds 99', expected: '27.8MG' },
        { name: '18.9 MCG 19 MG', expected: '18.9MCG' },
        { name: '18.9 19 MG', expected: '19MG' },
        { name: '1MG', expected: '1MG' },
        { name: '19MCG', expected: '19MCG' },
        { name: '23490 9230439 27.8 MR 89089kflds 99', expected: null },
        { name: 'jkflfkdslfds jfdksalfjkds 898989 jkfdsjakfd', expected: null },
        { name: ' . MG fkslfljds fsdafds', expected: null },
        { name: '', expected: null },
        { name: '     ', expected: null },
        { name: 'MG', expected: null },
        { name: 'MCG', expected: null },
    ]

    for (let i = 0; i < testCases.length; i++) {
        let test = testCases[i];
        let actual = extractDoseFromName(test.name)
        if(actual !== test.expected){
            return TEST_NAME + " FAILED! Expected: " + test.expected + " but actual: " + actual + "\nFor input: " + JSON.stringify(test);
        }
    }
    return TEST_NAME + " PASSED!"
}
console.log(extractDoseFromNameTest());